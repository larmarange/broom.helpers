<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • broom.helpers</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="broom.helpers">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">broom.helpers</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tidy.html">Getting Started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/larmarange/broom.helpers/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tidy_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/larmarange/broom.helpers/blob/master/vignettes/tidy.Rmd"><code>vignettes/tidy.Rmd</code></a></small>
      <div class="hidden name"><code>tidy.Rmd</code></div>

    </div>

    
    
<p>The tidy.helpers package offers a suite of functions that make easy to interact, add information, and manipulate tibbles created with <code><a href="https://broom.tidymodels.org/reference/reexports.html">broom::tidy()</a></code> (and friends).</p>
<p>As a motivating example, let’s summarize a logistic regression model with a forest plot and in a table.</p>
<p>To begin, let’s load our packages.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">broom.helpers</span>); <span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">gtsummary</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>); <span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)</pre></body></html></div>
<p>Our model predicts tumor response using chemotherapy treatment and tumor grade. The data set we’re utilizing has already labelled the columns using the <a href="http://larmarange.github.io/labelled/">labelled package</a>. The column labels will be carried through to our figure and table.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">model_logit</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">response</span> ~ <span class="no">trt</span> + <span class="no">grade</span>, <span class="no">trial</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="no">binomial</span>)
<span class="kw pkg">broom</span><span class="kw ns">::</span><span class="fu"><a href="https://broom.tidymodels.org/reference/reexports.html">tidy</a></span>(<span class="no">model_logit</span>)
<span class="co">#&gt; # A tibble: 4 x 5</span>
<span class="co">#&gt;   term        estimate std.error statistic p.value</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 (Intercept)  -0.879      0.305    -2.88  0.00400</span>
<span class="co">#&gt; 2 trtDrug B     0.194      0.311     0.625 0.532  </span>
<span class="co">#&gt; 3 gradeII      -0.0647     0.381    -0.170 0.865  </span>
<span class="co">#&gt; 4 gradeIII      0.0822     0.376     0.219 0.827</span></pre></body></html></div>
<div id="forest-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#forest-plot" class="anchor"></a>Forest Plot</h2>
<p>To create the figure, we’ll need to add some information to the tidy tibble, i.e. we’ll need to group the terms that belong to the same variable, add the reference row, etc. Parsing this information can be difficult, but the broom.helper package has made it simple.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">tidy_forest</span> <span class="kw">&lt;-</span>
  <span class="no">model_logit</span> <span class="kw">%&gt;%</span>
  <span class="co"># perform initial tidying of the model</span>
  <span class="fu"><a href="../reference/tidy_attach_model.html">tidy_and_attach</a></span>(<span class="kw">exponentiate</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">conf.int</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span>
  <span class="co"># adding in the reference row for categorical variables</span>
  <span class="fu"><a href="../reference/tidy_add_reference_rows.html">tidy_add_reference_rows</a></span>() <span class="kw">%&gt;%</span>
  <span class="co"># adding a reference value to appear in plot</span>
  <span class="fu"><a href="../reference/tidy_add_estimate_to_reference_rows.html">tidy_add_estimate_to_reference_rows</a></span>(<span class="kw">exponentiate</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span>
  <span class="co"># adding the variable labels</span>
  <span class="fu"><a href="../reference/tidy_add_term_labels.html">tidy_add_term_labels</a></span>() <span class="kw">%&gt;%</span>
  <span class="co"># removing intercept estimate from model</span>
  <span class="fu"><a href="../reference/tidy_remove_intercept.html">tidy_remove_intercept</a></span>()
<span class="no">tidy_forest</span>
<span class="co">#&gt; # A tibble: 5 x 14</span>
<span class="co">#&gt;   term  variable var_label var_class var_type contrasts reference_row label</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;lgl&gt;         &lt;chr&gt;</span>
<span class="co">#&gt; 1 trtD… trt      Chemothe… character categor… contr.tr… TRUE          Drug…</span>
<span class="co">#&gt; 2 trtD… trt      Chemothe… character categor… contr.tr… FALSE         Drug…</span>
<span class="co">#&gt; 3 grad… grade    Grade     factor    categor… contr.tr… TRUE          I    </span>
<span class="co">#&gt; 4 grad… grade    Grade     factor    categor… contr.tr… FALSE         II   </span>
<span class="co">#&gt; 5 grad… grade    Grade     factor    categor… contr.tr… FALSE         III  </span>
<span class="co">#&gt; # … with 6 more variables: estimate &lt;dbl&gt;, std.error &lt;dbl&gt;, statistic &lt;dbl&gt;,</span>
<span class="co">#&gt; #   p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;</span></pre></body></html></div>
<p>We now have a tibble with every piece of information we need to create our forest plot.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">tidy_forest</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(
    <span class="kw">plot_label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">var_label</span>, <span class="no">label</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">":"</span>) <span class="kw">%&gt;%</span>
      <span class="kw pkg">forcats</span><span class="kw ns">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_inorder</a></span>() <span class="kw">%&gt;%</span>
      <span class="kw pkg">forcats</span><span class="kw ns">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span>()
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">plot_label</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">estimate</span>, <span class="kw">ymin</span> <span class="kw">=</span> <span class="no">conf.low</span>, <span class="kw">ymax</span> <span class="kw">=</span> <span class="no">conf.high</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">variable</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_pointrange</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span>(<span class="kw">yintercept</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="fl">2</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(
    <span class="kw">y</span> <span class="kw">=</span> <span class="st">"Odds Ratio"</span>,
    <span class="kw">x</span> <span class="kw">=</span> <span class="st">" "</span>,
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Forest Plot using broom.helpers"</span>
  )</pre></body></html></div>
<p><img src="tidy_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div id="table-summary" class="section level2">
<h2 class="hasAnchor">
<a href="#table-summary" class="anchor"></a>Table Summary</h2>
<p>In addition to aiding in figure creation, the broom.helpers package can help summarize a model in a table. In the example below, we add header and reference rows, and utilize existing variable labels. Let’s change the labels shown in our summary table as well.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">tidy_table</span> <span class="kw">&lt;-</span>
  <span class="no">model_logit</span> <span class="kw">%&gt;%</span>
  <span class="co"># perform initial tidying of the model</span>
  <span class="fu"><a href="../reference/tidy_attach_model.html">tidy_and_attach</a></span>(<span class="kw">exponentiate</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">conf.int</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span>
  <span class="co"># adding in the reference row for categorical variables</span>
  <span class="fu"><a href="../reference/tidy_add_reference_rows.html">tidy_add_reference_rows</a></span>() <span class="kw">%&gt;%</span>
  <span class="co"># adding the variable labels</span>
  <span class="fu"><a href="../reference/tidy_add_term_labels.html">tidy_add_term_labels</a></span>() <span class="kw">%&gt;%</span>
  <span class="co"># add header row</span>
  <span class="fu"><a href="../reference/tidy_add_header_rows.html">tidy_add_header_rows</a></span>() <span class="kw">%&gt;%</span>
  <span class="co"># removing intercept estimate from model</span>
  <span class="fu"><a href="../reference/tidy_remove_intercept.html">tidy_remove_intercept</a></span>()

<span class="co"># print summary table</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="kw">knitr.kable.NA</span> <span class="kw">=</span> <span class="st">''</span>)
<span class="no">tidy_table</span> <span class="kw">%&gt;%</span>
  <span class="co"># format model estimates</span>
  <span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/reexports.html">select</a></span>(<span class="no">label</span>, <span class="no">estimate</span>, <span class="no">conf.low</span>, <span class="no">conf.high</span>, <span class="no">p.value</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(<span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/reexports.html">vars</a></span>(<span class="no">estimate</span>, <span class="no">conf.low</span>, <span class="no">conf.high</span>), <span class="no">style_ratio</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(<span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/reexports.html">vars</a></span>(<span class="no">p.value</span>), <span class="no">style_pvalue</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">estimate</th>
<th align="left">conf.low</th>
<th align="left">conf.high</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Chemotherapy Treatment</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Drug A</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Drug B</td>
<td align="left">1.21</td>
<td align="left">0.66</td>
<td align="left">2.24</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">Grade</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">II</td>
<td align="left">0.94</td>
<td align="left">0.44</td>
<td align="left">1.98</td>
<td align="left">0.9</td>
</tr>
<tr class="odd">
<td align="left">III</td>
<td align="left">1.09</td>
<td align="left">0.52</td>
<td align="left">2.27</td>
<td align="left">0.8</td>
</tr>
</tbody>
</table>
<p>There is also a handy wrapper for the most commonly used <code>tidy_*()</code> functions, and they can be executed with a single line of code:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">model_logit</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/tidy_plus_plus.html">tidy_plus_plus</a></span>(<span class="kw">exponentiate</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">conf.int</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; # A tibble: 5 x 14</span>
<span class="co">#&gt;   term  variable var_label var_class var_type contrasts reference_row label</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;lgl&gt;         &lt;chr&gt;</span>
<span class="co">#&gt; 1 trtD… trt      Chemothe… character categor… contr.tr… TRUE          Drug…</span>
<span class="co">#&gt; 2 trtD… trt      Chemothe… character categor… contr.tr… FALSE         Drug…</span>
<span class="co">#&gt; 3 grad… grade    Grade     factor    categor… contr.tr… TRUE          I    </span>
<span class="co">#&gt; 4 grad… grade    Grade     factor    categor… contr.tr… FALSE         II   </span>
<span class="co">#&gt; 5 grad… grade    Grade     factor    categor… contr.tr… FALSE         III  </span>
<span class="co">#&gt; # … with 6 more variables: estimate &lt;dbl&gt;, std.error &lt;dbl&gt;, statistic &lt;dbl&gt;,</span>
<span class="co">#&gt; #   p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joseph Larmarange, Daniel D. Sjoberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
